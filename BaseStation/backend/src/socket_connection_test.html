<html>
  <meta charset="utf-8">
  <p>Open your console with F12 to see if it worked.</p>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js" integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I=" crossorigin="anonymous"></script>
  <script type="text/javascript">
    const path = 'http://0.0.0.0:5000'
    const socket = io.connect(path)
    const sequenceSocket = io.connect(path + '/sequence')

    const logMessage = message => console.log(message)
    const stopSequence = () => sequenceSocket.emit('stop')
    const pauseSequence = () => sequenceSocket.emit('pause')
    const resumeSequence = () => sequenceSocket.emit('resume')
    
    socket.on('connect', () => {
      sequenceSocket.emit('start')
      setTimeout(resumeSequence, 5000)
    })
    
    socket.on('message', logMessage)

    sequenceSocket.on('task_started', (name) => {
      console.log(`task '${name}' started`)
    })
    
    sequenceSocket.on('ended', () => {
      console.log('sequence ended')
    })

    sequenceSocket.on('task_warning', (warning) => {
      console.warn(`task: '${warning.task}', error: '${warning.message}'`)
    })

    sequenceSocket.on('task_error', (error) => {
      console.error(`task: '${error.task}', error: '${error.message}'`)
    })
  </script>
</html>
